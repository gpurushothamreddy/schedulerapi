#!/bin/sh
BINARY=$GOPATH/bin/scheduleapi
CMDPATH=github.com/schedulerapi/cmd


CGO_ENABLED=0 GOARCH=amd64 GOOS=linux go build -o "$BINARY" "$CMDPATH"

mkdir -p Dockertmp

cp -R $GOPATH/bin/scheduleapi Dockertmp/
cp -R deploy/* Dockertmp/

cd Dockertmp

docker build -f Dockerfile -t "scheduleapi:latest" .
cd ..

rm -rf Dockertmp
docker run -it -p 8888:8888 scheduleapi